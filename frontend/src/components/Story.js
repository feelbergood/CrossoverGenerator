import React from 'react';
import DecoupledEditor from '@ckeditor/ckeditor5-build-decoupled-document';


import { Row, Col, Button, Form, FormGroup, Label, Input } from 'reactstrap';

const storyText = `Bilbo Baggins walked out of his home of Bag End and into the sunshine. He felt the warmth of the sun trickle down his head and bare feet. The countryside around Bag end was almost empty, so Bilbo decided to take a peaceful walk to a nearby forest. Along the way, he passed by the scowling Sacksville-Bagginses, who always envied Bilbo's luxurious Bag End. Bilbo's mood went down a bit, seeing his cousin Otho Sacksville-Baggins. But Bilbo smiled and said "Good day to you" to his 
cousins, since Bilbo was quite happy. The Sacksville-Bagginses still looked at him cold when Bilbo was on his way. He walked two kilometres to a nearby forest and sat down next to an oak tree. Bilbo breathed in the fresh air and the calmness of the forest. It was practically empty, save for Bilbo Baggins. He felt sleepy and his eyes started to close. Then he slept. Bilbo Baggins dreamed of his younger self, throwing rocks at small animals, practicing his aim. His aim got so good that whenever an animal saw him just bend to pick up a rock, it ran or flew away as quick as a dragon. Of course, Bilbo didn't just do that. Bilbo Baggins also spent time playing darts, ninepins, bowls, quoits and many other games where a Hobbit could practise his or her aim. And sit down outside and blow smoke rings. Those were among Bilbo's favorite memories. Bilbo awoke the next hour. He felt an urge to pick up a rock and throw it. It increased even more when an unsuspecting deer walked by and stood next to a nearby tree. "That will be a good time to test my skill" Bilbo said to himself. A hand found an egg-sized rock and enclosed it. Bilbo stood up quietly and his eyes went sharp to the deer. The deer was facing the other way. Bilbo wouldn't mess it up now. Bilbo swung his arms as 
hard as he can and threw the rock. What happens next will change the course of his life. The deer got knocked back from the rock that hit it on the head. Bilbo smiled at his marksmanship. The deer got up and quickly looked at Bilbo. Then an unsuspecting arrow flew out of nowhere and missed the deer by a couple centimetres, landing on the tree behind the deer. The deer turned and ran from the scene as quickly as it can. Bilbo was bewildered from the random arrow attack. But Bilbo didn't see any harm in it as it was the Shire. "Oh, must be some Tooks playing around with arrows" Bilbo said to himself as he went to look at the arrow. It had an iron arrowhead 
with a wooden body and geese feathers. Bilbo took the arrow from the tree and put it in his pocket, half of it sticking out. Suddenly, a young girl in a brown coat jumped out a nearby shrub and fired an arrow at Bilbo. Bilbo just barely dodged the arrow when the girl caught up to Bilbo sitting down in shock. Bilbo raised his hands in shock when he was face to face to the girl. The girl seemed to be a 17 year old human, with olive skin, gray eyes and a long black braid flowing down her shoulder. The girl was twice the height of Bilbo. She aimed her bow and arrow at Bilbo's face. "Whoa whoa whoa, please don't shoot me" cried out Bilbo. "I meant no harm to you". The girl went closer and the tip of the arrow touched poor Bilbo's nose. "You scared my food away. Now how will i feed my family" The girl screamed. Bilbo looked at the path the deer went down "That deer?" Bilbo asked. The girl pulled her bow and arrow away a few centimetres. "The deer you scared off" the girl said. Bilbo put down his hands and stood up. "Sorry if i scared that deer away. I meant no harm to come to you. I just wanted to relax here and practice my aiming skills." The girl's face hardened in question. "By scaring it away?" the girl asked. Bilbo walked a few steps to the side. Bilbo took a 
breath and said "look, I can help you get your deer back. Is that fair?" An awkward silence passed. Then "Ugh, fine." the girl said in slight anger. Bilbo pulled out his hand. "I'm Bilbo Baggins. Nice to meet you." The girl didn't shake his hand. "Katniss Everdeen" the girl replied. Bilbo's hand remained unshaken. Katniss poked Bilbo with her bow and said "Now lead the way little man". "I am no man, but rather a Hobbit of normal height" Bilbo replied as he led Katniss, the girl to the path. It wasn't hard to follow the deer's footsteps as its hooves made deep marks into the dirt ground. "A hob-hobbit? what is a Hobbit?" Katniss asked. She stared at Bilbo's hairy barefoot feet and his curly hair. Bilbo replied "my folk from the Shire. I am not human, but a Hobbit. Haven't you ever heard of a Hobbit?" Katniss said "I know nothing of this Shire or your folk." Bilbo stopped in his tracks. He thought that Katniss was either insane or under a rock. But he guessed at the last minute that she was a foreigner. "Are you from Middle-Earth Katniss?" asked Bilbo. Katniss poked Bilbo again with her bow then said "District 12. I do not know of Middle Earth." "Well, that's the continent we are in" Bilbo said confidently. Katniss' face rose in anger. "This is Panem. I know what 
my homeland is". "I also know that this is middle earth and not Panem". Bilbo did not know of any Panem from the history books or maps. It was the first time he heard of this odd word. Suddenly a question popped into Bilbo's head. As he walked he asked "How did you get here?" Katniss sighed then slung her bow on her back and then began. "Yesterday, I went out hunting for food to feed my starving mother and sister. When i was in the forest, I caught sight of a strange path. I walked towards it and blacked out. Then I woke up and started chasing a deer. That is until I found you." Bilbo asked "What did the path look like?" Katniss replied "It looked like a normal tunnel, except for the path. The path was what made it strange. It was rainbow coloured and had every colour on it." While the walk and talk went on, Bilbo spotted something. It was Katniss' deer, sleeping. Immediately, Bilbo crouched down, pulling Katniss down also. Bilbo whispered to Katniss "Shh, the deer is there." Katniss stood up and pulled out her bow. She quickly drew her arrow and fired. The deer looked around in its last moments of life as the arrow sped towards it. The arrow went straight into the deer's eye. Bilbo was amazed at her quick shot. Bilbo turned to face Katniss. The lost girl just 
stood there with lowered eyebrows. "You know, until you can get back home, you're always welcome to say at my place." Bilbo said to Katniss. Katniss slung an arrow into her quiver and put her bow on her back. "I'm fine right now. I'm going home." Bilbo grabbed her hand as she turned. "No. You're lost and hungry. The forest is no place to stay. Tell you what, I can take you to my home and help you on your feet. I will offer you my hospitality and I will promise you will be treated as an invited guest. Then the next day, I can help you look for that portal you mentioned." Silence passed for a few seconds. Then Katniss rolled her eyes and spoke. "Fine, I guess." Katniss sighed Bilbo pulled a quick smile for a second. Then he said "Glad to hear." Bilbo led his new acquaintance through the trees and out the forest. When they got out the forest, Katniss looked quite confused. She was looking at the numerous Smials, or Hobbit-Holes. "These buildings look quite strange." They were Katniss' only response to seeing what she saw were doors and windows on the side of a hill. Bilbo looked at her and said "Well, these are Smials. You can call them Hobbit-holes. We make quite comfortable homes inside these hills. Well furnished, large rooms, lots of pantries, great for parties. Just watch your head when you get inside." Bilbo showed Katniss much of the Shire on the way to Bag End. When they neared Bilbo's home, Bilbo saw the Sacksville-Bagginses walking towards him and Katniss. Bilbo tried to ignore the S.B's but it was hard, considering Katniss and the look on the Sacksville-Bagginses faces. "Just what you think you're doing with the big folk, Bilbo" Lobelia Sacksville-Baggins sneered Katniss put her hand on her bow and shot Lobelia a mean look. Bilbo said "She is my guest. Now leave." "Aurghh" grunted Lobelia and Otho together. When they passed Bilbo and Katniss, they whispered to each other. "Lobelia, look at Bilbo. He brought a human girl along. That is queer of him." Otho whispered. Lobelia whispered back "That odd hobbit maybe marrying her don't you think Otho?" "Maybe just to deny us Bag end" They laughed to each other in a rather scary way. The Sacksville-Bagginses would make any excuse, ridiculous or not, just to remove Bilbo of his beloved Bag End. When they got to Bag End, Katniss touched the round door. "I've never seen it Bilbo" She said to Bilbo Baggins. Bilbo shrugged and smiled. "Our architecture. You can go first". Bilbo opened the round green door for his guest. The two went inside. Katniss had to duck her head. Bilbo showed her the kitchen, the living room, the numerous pantries, the study room and the Guest room. Katniss was amazed at his home, as it was larger than her home in District 12. She saw the food at the pantry, which could feed her sister and mother for months. When Bilbo was done with his tour, Katniss went to her bedroom. Bilbo followed her. Katniss was a bit surprised at the guest bedroom. Even though it was a beautiful room and well decorated, she wasn't entirely happy with the bed size, for it was smaller than her. She turned to Bilbo. "Bilbo, the bed is small. Do you have any other beds or something I can sleep on that's my size?" Katniss asked her host. Bilbo raised a finger for a solution. "I just got the idea. I will be back soon." Bilbo went out of the guest room to his bedroom. He went to the bed, pulled the blankets off, along with the feathered pillow and matress, leaving a frame. HE then pulled the frame to the guest room and put it beside the bed, moving some things to the side. Next he brought the matress to the guest room with the pillow and blanket and put them on the bed. He got a spare bed out and put it next to his bed. All that took fifteen minutes. Bilbo walked out and called out "Katniss! Im done!" A shout came from another section of the Smial. "Over here!" Bilbo walked to the direction of the sound and saw Katniss looking at his food. She had half a biscuit in her mouth, the other half in her hand. Some heat went up Bilbo. "Hey I was saving that for afternoon tea." Bilbo said to Katniss Katniss stared at Bilbo, still chewing. Then she turned her head sideways and frowned. Bilbo raised his hands. Bilbo then said "Ok, you can have it. And speaking of Afternoon tea, it's…" Bilbo looks at the clock. It was 4 O'clock PM. "Afternoon tea is now." Bilbo turns to Katniss. "Now is afternoon tea. Care to join me?" Katniss thought of that for a second, then smiled and said "yes".`;

export default class Story extends React.Component {

  componentDidMount() {
    // document.querySelector( '.document-editor__editable' ).innerHTML = "<p>Hello World</p>";
    DecoupledEditor
    .create( document.querySelector( '.document-editor__editable' ), {
        cloudServices: {

        }
    } )
    .then( editor => {
        const toolbarContainer = document.querySelector( '.document-editor__toolbar' );

        toolbarContainer.appendChild( editor.ui.view.toolbar.element );

        window.editor = editor;
    } )
    .catch( err => {
        console.error( err );
    } );
  }

  title() {
    if (this.props.firstNovel && this.props.secondNovel) {
      return (<Label for="storyText">
                Your Crossover of {this.props.firstNovel.value} and {this.props.secondNovel.value}
              </Label>);
    }
  }
  downloadTxtFile = () => {
    const element = document.createElement("a");
    const file = new Blob([document.getElementById('myInput').value], {type: 'text/plain'});
    element.href = URL.createObjectURL(file);
    element.download = "myFile.txt";
    document.body.appendChild(element); // Required for this to work in FireFox
    element.click();
  }


  render() {
    return (
      <Form>
        {/* <FormGroup>
          <Label for="storyText">
            {this.title()}
          </Label>
          <Input type="textarea" name="text" id="storyText" 
            style={{height: "600px"}} placeholder={storyText}/>
        </FormGroup> */}

        <FormGroup>
        <div className="document-editor">
            <div className="document-editor__toolbar"></div>
            <div className="document-editor__editable-container">
                <div className="document-editor__editable">
                    <p>{storyText}</p>
                </div>
            </div>
        </div>          
        </FormGroup>

        <FormGroup>  
          <Row>
            <Col sm="1"></Col>
            <Col>
              <Button type="button"
                onClick={() => this.props.changeActiveStep(0)}
                className="btn btn-primary btn-block">
                New Crossover
              </Button>
            </Col>
            <Col sm="1"></Col>
            <Col>
              <Button type="button"
                onClick={() => this.props.changeActiveStep(1)}
                className="btn btn-block">
                Adjust Settings
              </Button>
            </Col>
            <Col sm="1"></Col>
            <Col>
              <Button type="button"
                color="primary"
                onClick={this.downloadTxtFile}
                className="btn btn-block">
                Download PDF
                </Button>
            </Col>
            <Col sm="1"></Col>
          </Row>
        </FormGroup>
      </Form>
    );
  }
}